{
  "version": "2.1",
  "lastUpdated": "2025-01-07T15:00:00Z",
  "description": "BBL CAD-Richtlinie Validation Rule Catalog",
  "rules": [
    {
      "code": "LAYER_001",
      "name": "Required Layer Check",
      "category": "layer",
      "severity": "error",
      "description": "Validates that all required BBL layers are present in the drawing",
      "requirement": "All 14 mandatory BBL layers must exist",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#layers",
      "parameters": {
        "requiredLayers": [
          "Architecture_Wände",
          "Architecture_Türen",
          "Architecture_Fenster",
          "Raum_Nutzfläche",
          "Raum_Verkehrsfläche",
          "Raum_Technikfläche",
          "Raum_Text",
          "Möblierung",
          "Equipment",
          "Beschriftung",
          "Maßlinien",
          "Grid",
          "0",
          "Defpoints"
        ]
      }
    },
    {
      "code": "LAYER_002",
      "name": "Layer Color Check",
      "category": "layer",
      "severity": "warning",
      "description": "Validates that layer colors match BBL CAD guideline specifications",
      "requirement": "Layer colors must match defined RGB values",
      "autoFixable": true,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#layers",
      "parameters": {
        "colorMapping": {
          "Architecture_Wände": "RGB(255,255,255)",
          "Architecture_Türen": "RGB(0,255,0)",
          "Raum_Nutzfläche": "RGB(0,255,255)",
          "Möblierung": "RGB(128,128,128)"
        }
      }
    },
    {
      "code": "LAYER_003",
      "name": "Unexpected Layer Check",
      "category": "layer",
      "severity": "warning",
      "description": "Warns about layers not defined in BBL CAD guideline",
      "requirement": "Only BBL standard layers and system layers (0, Defpoints) allowed",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#layers",
      "parameters": {
        "allowSystemLayers": true
      }
    },
    {
      "code": "POLY_001",
      "name": "Minimum Area Check",
      "category": "geometry",
      "severity": "warning",
      "description": "Checks that room polygons meet minimum area threshold",
      "requirement": "Room area must be ≥ 0.25 m²",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#areas",
      "parameters": {
        "minimumAreaM2": 0.25
      }
    },
    {
      "code": "POLY_002",
      "name": "Self-Intersection Check",
      "category": "geometry",
      "severity": "error",
      "description": "Detects self-intersecting polygons",
      "requirement": "Room polygons must be simple (non-self-intersecting)",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#geometry",
      "parameters": {}
    },
    {
      "code": "POLY_003",
      "name": "Polyline Closure Check",
      "category": "geometry",
      "severity": "error",
      "description": "Validates that room polylines are closed",
      "requirement": "First and last vertices must be identical",
      "autoFixable": true,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#polylines",
      "parameters": {
        "toleranceMeters": 0.001
      }
    },
    {
      "code": "GEOM_001",
      "name": "Z-Coordinate Check",
      "category": "geometry",
      "severity": "error",
      "description": "Validates that all geometry has Z-coordinate = 0 (2D floor plans only)",
      "requirement": "All vertices must have Z = 0",
      "autoFixable": true,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#geometry",
      "parameters": {
        "tolerance": 0.0001
      }
    },
    {
      "code": "GEOM_002",
      "name": "Overlapping Polygon Check",
      "category": "geometry",
      "severity": "error",
      "description": "Detects overlapping room polygons",
      "requirement": "Room polygons must not overlap",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#geometry",
      "parameters": {
        "toleranceM2": 0.01
      }
    },
    {
      "code": "GEOM_005",
      "name": "Polyline Width Check",
      "category": "geometry",
      "severity": "warning",
      "description": "Validates that polylines have zero width",
      "requirement": "Polyline width must be 0",
      "autoFixable": true,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#geometry",
      "parameters": {}
    },
    {
      "code": "GEOM_007",
      "name": "Polyline Winding Order",
      "category": "geometry",
      "severity": "info",
      "description": "Checks polygon winding order (counter-clockwise preferred)",
      "requirement": "Polygons should use counter-clockwise winding",
      "autoFixable": true,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#geometry",
      "parameters": {}
    },
    {
      "code": "ENTITY_001",
      "name": "Forbidden Entity Check",
      "category": "entity",
      "severity": "error",
      "description": "Detects forbidden entity types (SPLINE, ELLIPSE, OLE objects)",
      "requirement": "Only LINE, POLYLINE, LWPOLYLINE, TEXT, MTEXT allowed",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#entities",
      "parameters": {
        "forbiddenTypes": ["SPLINE", "ELLIPSE", "OLE", "OLE2FRAME", "IMAGE", "HATCH"]
      }
    },
    {
      "code": "ENTITY_002",
      "name": "Entity Layer Assignment",
      "category": "entity",
      "severity": "error",
      "description": "Validates that entities are on appropriate layers",
      "requirement": "Entity types must be on allowed layers",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#entities",
      "parameters": {
        "layerRules": {
          "POLYLINE": ["Architecture_Wände", "Raum_Nutzfläche", "Raum_Verkehrsfläche"],
          "TEXT": ["Raum_Text", "Beschriftung"]
        }
      }
    },
    {
      "code": "TEXT_001",
      "name": "Font Type Check",
      "category": "text",
      "severity": "error",
      "description": "Validates that text uses Arial font",
      "requirement": "All text must use Arial font",
      "autoFixable": true,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#text",
      "parameters": {
        "requiredFont": "Arial",
        "allowedFonts": ["Arial", "Arial Narrow"]
      }
    },
    {
      "code": "TEXT_002",
      "name": "Text Color Check",
      "category": "text",
      "severity": "warning",
      "description": "Validates that text color is BYLAYER",
      "requirement": "Text color should be BYLAYER",
      "autoFixable": true,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#text",
      "parameters": {}
    },
    {
      "code": "TEXT_003",
      "name": "Text Height Check",
      "category": "text",
      "severity": "info",
      "description": "Validates text height for readability",
      "requirement": "Text height should be 2.5mm minimum at 1:100 scale",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#text",
      "parameters": {
        "minimumHeightMm": 2.5
      }
    },
    {
      "code": "AOID_001",
      "name": "AOID Uniqueness Check",
      "category": "aoid",
      "severity": "error",
      "description": "Validates that all AOIDs are unique within the drawing",
      "requirement": "No duplicate AOIDs allowed",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#aoid",
      "parameters": {}
    },
    {
      "code": "AOID_002",
      "name": "AOID Format Validation",
      "category": "aoid",
      "severity": "error",
      "description": "Validates AOID format against regex pattern",
      "requirement": "AOID must match pattern: ####.XX.##.###",
      "autoFixable": true,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#aoid",
      "parameters": {
        "pattern": "^\\d{4}\\.[A-Z]{2}\\.\\d{2}\\.\\d{3}$",
        "example": "2011.DM.04.045"
      }
    },
    {
      "code": "AOID_003",
      "name": "AOID Position Check",
      "category": "aoid",
      "severity": "warning",
      "description": "Validates that AOID text is inside corresponding room polygon",
      "requirement": "AOID must be positioned within room boundary",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#aoid",
      "parameters": {}
    },
    {
      "code": "AOID_004",
      "name": "AOID Room Association",
      "category": "aoid",
      "severity": "error",
      "description": "Validates that each room has exactly one AOID",
      "requirement": "One AOID per room polygon",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#aoid",
      "parameters": {}
    },
    {
      "code": "AOID_005",
      "name": "AOID Excel Cross-Reference",
      "category": "aoid",
      "severity": "warning",
      "description": "Cross-validates AOIDs with Excel room list",
      "requirement": "AOIDs in DWG must match Excel room list",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#aoid",
      "parameters": {}
    },
    {
      "code": "STRUCT_001",
      "name": "External Reference Check",
      "category": "structure",
      "severity": "warning",
      "description": "Detects external references (XREFs)",
      "requirement": "XREFs should be avoided or properly documented",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#structure",
      "parameters": {
        "allowXrefs": false
      }
    },
    {
      "code": "STRUCT_002",
      "name": "Block Definition Check",
      "category": "structure",
      "severity": "info",
      "description": "Validates proper use of blocks for repeated elements",
      "requirement": "Use blocks for furniture and equipment",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#structure",
      "parameters": {}
    },
    {
      "code": "STRUCT_003",
      "name": "Drawing Scale Check",
      "category": "structure",
      "severity": "warning",
      "description": "Validates drawing scale metadata",
      "requirement": "Drawing scale should be 1:100 for floor plans",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#structure",
      "parameters": {
        "requiredScale": "1:100"
      }
    },
    {
      "code": "AREA_001",
      "name": "Area Calculation Validation",
      "category": "area",
      "severity": "warning",
      "description": "Compares calculated areas with AREA attribute values",
      "requirement": "Calculated area must match AREA attribute within tolerance",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#areas",
      "parameters": {
        "tolerancePercent": 2.0
      }
    },
    {
      "code": "AREA_002",
      "name": "SIA 416 Consistency Check",
      "category": "area",
      "severity": "error",
      "description": "Validates SIA 416 area relationships (GF = NGF + KF, etc.)",
      "requirement": "SIA 416 formulas must be satisfied",
      "autoFixable": false,
      "documentationUrl": "https://bbl.admin.ch/cad-richtlinie#sia416",
      "parameters": {
        "toleranceM2": 0.5
      }
    }
  ]
}
